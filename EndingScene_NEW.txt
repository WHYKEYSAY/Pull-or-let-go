::EndingScene
<!-- Calculate event choices for events 1/2 and event 3 separately -->
(set: _bullyEvents12Helped to (cond: $event1Choice is "help", 1, 0) + (cond: $event2Choice is "help", 1, 0))
(set: _bullyEvents12Ignored to (cond: $event1Choice is "ignore", 1, 0) + (cond: $event2Choice is "ignore", 1, 0))
(set: _bullyEvents12Bullied to (cond: $event1Choice is "bully", 1, 0) + (cond: $event2Choice is "bully", 1, 0))
(set: _bullyEvent3Helped to (cond: $event3Choice is "help", 1, 0))
(set: _bullyEvent3Ignored to (cond: $event3Choice is "ignore", 1, 0))
(set: _bullyEvent3Bullied to (cond: $event3Choice is "bully", 1, 0))

<!-- FRIEND BRANCH (Friendship >= 40) -->
(if: $friendship >= 40)[
  <!-- Row 1: Got bullied 0 times - User help on all events -->
  (if: _bullyEvents12Helped is 2 and _bullyEvent3Helped is 1)[
    [[Your journey ends here.->Ending1]]
  ]
  
  <!-- Row 2: Got bullied 0 times, Ignore +, Bully ++ - User ignore on event 1/2, help other events -->
  (else-if: _bullyEvents12Ignored >= 1 and _bullyEvents12Ignored <= 2 and _bullyEvent3Helped is 1 and _bullyEvents12Bullied is 0 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending2]]
  ]
  
  <!-- Row 3: Got bullied 0 times, Ignore +, Bully ++ - User ignore on event 3, help other events -->
  (else-if: _bullyEvents12Helped is 2 and _bullyEvent3Ignored is 1 and _bullyEvents12Bullied is 0 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending3]]
  ]
  
  <!-- Row 4: Critical: Event3 > Event2 > Event1 - User bully on event 1/2, help other events -->
  (else-if: _bullyEvents12Bullied >= 1 and _bullyEvents12Bullied <= 2 and _bullyEvent3Helped is 1 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending4]]
  ]
  
  <!-- Row 5: Critical: Event3 > Event2 > Event1 - User bully on event 3, help other events -->
  (else-if: _bullyEvents12Helped is 2 and _bullyEvent3Bullied is 1)[
    [[Your journey ends here.->Ending5]]
  ]
  
  <!-- Row 6: Got bullied 2 times - User ignore event 1 and event 2 and help event 3 -->
  (else-if: _bullyEvents12Ignored is 2 and _bullyEvent3Helped is 1 and _bullyEvents12Bullied is 0 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending2]]
  ]
  
  <!-- Row 7: Got bullied 2 times - User ignore events event 3 and event 1/2 and help event 2/1 -->
  (else-if: _bullyEvents12Ignored is 1 and _bullyEvents12Helped is 1 and _bullyEvent3Ignored is 1 and _bullyEvents12Bullied is 0 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending3]]
  ]
  
  <!-- Row 8: Got bullied 2 times - User only bully event 1/2, help event 3, ignore event 2/1 -->
  (else-if: _bullyEvents12Bullied is 1 and _bullyEvents12Ignored is 1 and _bullyEvent3Helped is 1 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending3]]
  ]
  
  <!-- Row 9: Got bullied 2 times - User bully on event 1 and 2, help event 3 -->
  (else-if: _bullyEvents12Bullied is 2 and _bullyEvent3Helped is 1 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending4]]
  ]
  
  <!-- Row 10: Got bullied 2 times - User ignore event 3, bully event 1/2, help event 2/1 -->
  (else-if: _bullyEvents12Bullied is 1 and _bullyEvents12Helped is 1 and _bullyEvent3Ignored is 1 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending4]]
  ]
  
  <!-- Row 11: Got bullied 2 times - User bully on event 3, help event 1and ignore event 2 or help event 2 and ignore event 1 -->
  (else-if: _bullyEvents12Helped is 1 and _bullyEvents12Ignored is 1 and _bullyEvent3Bullied is 1 and _bullyEvents12Bullied is 0)[
    [[Your journey ends here.->Ending5]]
  ]
  
  <!-- Row 12: Got bullied 2 times - User bully event 3 and event 1/2, help event 2/1 -->
  (else-if: _bullyEvents12Bullied is 1 and _bullyEvents12Helped is 1 and _bullyEvent3Bullied is 1)[
    [[Your journey ends here.->Ending5]]
  ]
  
  <!-- Row 13: Got bullied 3 times - User ignore all events -->
  (else-if: _bullyEvents12Ignored is 2 and _bullyEvent3Ignored is 1 and _bullyEvents12Bullied is 0 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending6]]
  ]
  
  <!-- Row 14: Got bullied 3 times - User bully event 1/2, ignore others -->
  (else-if: _bullyEvents12Bullied >= 1 and _bullyEvent3Ignored is 1 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending5]]
  ]
  
  <!-- Row 15: Got bullied 3 times - User bully event 1 and 2, ignore event 3 -->
  (else-if: _bullyEvents12Bullied is 2 and _bullyEvent3Ignored is 1 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending5]]
  ]
  
  <!-- Row 16: Got bullied 3 times - User bully event 3, ignore others -->
  (else-if: _bullyEvents12Ignored is 2 and _bullyEvent3Bullied is 1 and _bullyEvents12Bullied is 0)[
    [[Your journey ends here.->Ending7]]
  ]
  
  <!-- Row 17: Got bullied 3 times - User bully event 3 and event 1/2, ignore event 2/1 -->
  (else-if: _bullyEvents12Bullied is 1 and _bullyEvents12Ignored is 1 and _bullyEvent3Bullied is 1)[
    [[Your journey ends here.->Ending7]]
  ]
  
  <!-- Row 18: Got bullied 3 times - User bully all events -->
  (else-if: _bullyEvents12Bullied is 2 and _bullyEvent3Bullied is 1)[
    [[Your journey ends here.->Ending7]]
  ]
  
  <!-- Fallback for any other friend cases -->
  (else:)[
    [[Your journey ends here.->Ending6]]
  ]
]
<!-- UNFRIEND BRANCH (Friendship < 40) -->
(else:)[
  <!-- Row 1: Got bullied 0 times - User help on all events -->
  (if: _bullyEvents12Helped is 2 and _bullyEvent3Helped is 1)[
    [[Your journey ends here.->Ending2]]
  ]
  
  <!-- Row 2: Got bullied 0 times, Ignore +, Bully ++ - User ignore on event 1/2, help other events -->
  (else-if: _bullyEvents12Ignored >= 1 and _bullyEvents12Ignored <= 2 and _bullyEvent3Helped is 1 and _bullyEvents12Bullied is 0 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending3]]
  ]
  
  <!-- Row 3: Got bullied 0 times, Ignore +, Bully ++ - User ignore on event 3, help other events -->
  (else-if: _bullyEvents12Helped is 2 and _bullyEvent3Ignored is 1 and _bullyEvents12Bullied is 0 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending4]]
  ]
  
  <!-- Row 4: Critical: Event3 > Event2 > Event1 - User bully on event 1/2, help other events -->
  (else-if: _bullyEvents12Bullied >= 1 and _bullyEvents12Bullied <= 2 and _bullyEvent3Helped is 1 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending4]]
  ]
  
  <!-- Row 5: Critical: Event3 > Event2 > Event1 - User bully on event 3, help other events -->
  (else-if: _bullyEvents12Helped is 2 and _bullyEvent3Bullied is 1)[
    [[Your journey ends here.->Ending5]]
  ]
  
  <!-- Row 6: Got bullied 2 times - User ignore event 1 and event 2 and help event 3 -->
  (else-if: _bullyEvents12Ignored is 2 and _bullyEvent3Helped is 1 and _bullyEvents12Bullied is 0 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending3]]
  ]
  
  <!-- Row 7: Got bullied 2 times - User ignore events event 3 and event 1/2 and help event 2/1 -->
  (else-if: _bullyEvents12Ignored is 1 and _bullyEvents12Helped is 1 and _bullyEvent3Ignored is 1 and _bullyEvents12Bullied is 0 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending4]]
  ]
  
  <!-- Row 8: Got bullied 2 times - User only bully event 1/2, help event 3, ignore event 2/1 -->
  (else-if: _bullyEvents12Bullied is 1 and _bullyEvents12Ignored is 1 and _bullyEvent3Helped is 1 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending4]]
  ]
  
  <!-- Row 9: Got bullied 2 times - User bully on event 1 and 2, help event 3 -->
  (else-if: _bullyEvents12Bullied is 2 and _bullyEvent3Helped is 1 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending5]]
  ]
  
  <!-- Row 10: Got bullied 2 times - User ignore event 3, bully event 1/2, help event 2/1 -->
  (else-if: _bullyEvents12Bullied is 1 and _bullyEvents12Helped is 1 and _bullyEvent3Ignored is 1 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending5]]
  ]
  
  <!-- Row 11: Got bullied 2 times - User bully on event 3, help event 1and ignore event 2 or help event 2 and ignore event 1 -->
  (else-if: _bullyEvents12Helped is 1 and _bullyEvents12Ignored is 1 and _bullyEvent3Bullied is 1 and _bullyEvents12Bullied is 0)[
    [[Your journey ends here.->Ending6]]
  ]
  
  <!-- Row 12: Got bullied 2 times - User bully event 3 and event 1/2, help event 2/1 -->
  (else-if: _bullyEvents12Bullied is 1 and _bullyEvents12Helped is 1 and _bullyEvent3Bullied is 1)[
    [[Your journey ends here.->Ending6]]
  ]
  
  <!-- Row 13: Got bullied 3 times - User ignore all events -->
  (else-if: _bullyEvents12Ignored is 2 and _bullyEvent3Ignored is 1 and _bullyEvents12Bullied is 0 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending6]]
  ]
  
  <!-- Row 14: Got bullied 3 times - User bully event 1/2, ignore others -->
  (else-if: _bullyEvents12Bullied >= 1 and _bullyEvent3Ignored is 1 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending6]]
  ]
  
  <!-- Row 15: Got bullied 3 times - User bully event 1 and 2, ignore event 3 -->
  (else-if: _bullyEvents12Bullied is 2 and _bullyEvent3Ignored is 1 and _bullyEvent3Bullied is 0)[
    [[Your journey ends here.->Ending6]]
  ]
  
  <!-- Row 16: Got bullied 3 times - User bully event 3, ignore others -->
  (else-if: _bullyEvents12Ignored is 2 and _bullyEvent3Bullied is 1 and _bullyEvents12Bullied is 0)[
    [[Your journey ends here.->Ending6]]
  ]
  
  <!-- Row 17: Got bullied 3 times - User bully event 3 and event 1/2, ignore event 2/1 -->
  (else-if: _bullyEvents12Bullied is 1 and _bullyEvents12Ignored is 1 and _bullyEvent3Bullied is 1)[
    [[Your journey ends here.->Ending6]]
  ]
  
  <!-- Row 18: Got bullied 3 times - User bully all events -->
  (else-if: _bullyEvents12Bullied is 2 and _bullyEvent3Bullied is 1)[
    [[Your journey ends here.->Ending6]]
  ]
  
  <!-- Fallback for any other unfriend cases -->
  (else:)[
    [[Your journey ends here.->Ending6]]
  ]
]
